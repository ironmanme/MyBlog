<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><style>.pace .pace-progress{background:#151513;height:2px}.pace .pace-progress-inner{box-shadow:0 0 10px #151513,0 0 5px #151513}.pace .pace-activity{border-top-color:#151513;border-left-color:#151513}</style><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css"><meta name="keywords" content="nwjs,electron,node,Chromium,桌面应用,"><link rel="alternate" href="/atom.xml" title="persilee's Blog" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><meta name="description" content="最近研究了一下基于 Chromium 定制浏览器的方案，查阅了大量资料，具体方案也有了大概的蓝图 😉"><meta name="keywords" content="nwjs,electron,node,Chromium,桌面应用"><meta property="og:type" content="article"><meta property="og:title" content="如何用 CSS + HTML + JS 创建桌面应用"><meta property="og:url" content="https://lishaoy.net/2018/03/28/nwjsElectronjs/index.html"><meta property="og:site_name" content="persilee&#39;s Blog"><meta property="og:description" content="最近研究了一下基于 Chromium 定制浏览器的方案，查阅了大量资料，具体方案也有了大概的蓝图 😉"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://yoshikiito.net/blog/wp-content/uploads/2016/09/electorn-logo.png"><meta property="og:image" content="http://html5.by/wp-content/uploads/2015/05/nw1.png"><meta property="og:updated_time" content="2018-03-28T10:07:15.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="如何用 CSS + HTML + JS 创建桌面应用"><meta name="twitter:description" content="最近研究了一下基于 Chromium 定制浏览器的方案，查阅了大量资料，具体方案也有了大概的蓝图 😉"><meta name="twitter:image" content="https://yoshikiito.net/blog/wp-content/uploads/2016/09/electorn-logo.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"post",offset:12,offset_float:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:!0,duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://lishaoy.net/2018/03/28/nwjsElectronjs/"><title>如何用 CSS + HTML + JS 创建桌面应用 | persilee's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/persilee" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></a><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">persilee's Blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://lishaoy.net/2018/03/28/nwjsElectronjs/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="李少颖（persilee）"><meta itemprop="description" content=""><meta itemprop="image" content="/images/lsy.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="persilee's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">如何用 CSS + HTML + JS 创建桌面应用</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-28T01:42:26+08:00">2018-03-28</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Node/" itemprop="url" rel="index"><span itemprop="name">Node</span></a></span></span> <span id="/2018/03/28/nwjsElectronjs/" class="leancloud_visitors" data-flag-title="如何用 CSS + HTML + JS 创建桌面应用"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">热度</span><span class="leancloud-visitors-count"></span> ℃</span><div class="post-wordcount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-pencil-square-o"></i></span> <span class="post-meta-item-text">字数统计：</span> <span title="字数统计：">2,327 (字)</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长：</span> <span title="阅读时长：">10 (分钟)</span></div></div></header><div class="post-body" itemprop="articleBody"><div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery"><div class="post-gallery-row"> <a class="post-gallery-img fancybox" href="https://yoshikiito.net/blog/wp-content/uploads/2016/09/electorn-logo.png" rel="gallery_cjfdswwda0002nxzmbwvczolk" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"><img src="https://yoshikiito.net/blog/wp-content/uploads/2016/09/electorn-logo.png" itemprop="contentUrl"></a> <a class="post-gallery-img fancybox" href="http://html5.by/wp-content/uploads/2015/05/nw1.png" rel="gallery_cjfdswwda0002nxzmbwvczolk" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"><img src="http://html5.by/wp-content/uploads/2015/05/nw1.png" itemprop="contentUrl"></a></div></div><p>最近研究了一下基于 <code>Chromium</code> 定制浏览器的方案，查阅了大量资料，具体方案也有了大概的蓝图 😉</p><a id="more"></a><p>在阐述方案之前，先要了解几个名词：</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h4 id="Chromium"><a href="#Chromium" class="headerlink" title="Chromium"></a>Chromium</h4><blockquote><p>Chromium是一个由Google主导开发的网页浏览器，以BSD许可证等多重自由版权发行并开放源代码。Chromium的开发可能早自2006年即开始。</p></blockquote><blockquote><p>Chromium是Google为发展自家的浏览器Google Chrome而打开的项目，所以Chromium相当于Google Chrome的工程版或实验版（尽管Google Chrome本身也有β版），新功能会率先在Chromium上开放，待验证后才会应用在Google Chrome上，故Google Chrome的功能会相对落后但较稳定。 —— <a href="https://zh.wikipedia.org/wiki/Chromium#cite_note-3" target="_blank" rel="noopener">维基百科</a></p></blockquote><h4 id="CEF"><a href="#CEF" class="headerlink" title="CEF"></a>CEF</h4><blockquote><p>Chromium Embedded Framework (CEF)是个基于Google Chromium项目的开源Web browser控件，支持Windows, Linux, Mac平台。除了提供C/C++接口外，也有其他语言的移植版。</p></blockquote><blockquote><p>因为基于Chromium，所以CEF支持Webkit &amp; Chrome中实现的HTML5的特性，并且在性能上面，也比较接近Chrome。 CEF还提供的如下特性：自定义插件、自定义协议、自定义JavaScript对象和扩展；可控制的resource loading, navigation, context menus等等 —— <a href="https://baike.baidu.com/item/CEF/20837917?fr=aladdin" target="_blank" rel="noopener">百度百科</a></p></blockquote><h4 id="NW"><a href="#NW" class="headerlink" title="NW"></a>NW</h4><blockquote><p>NW.js 是基于 Chromium 和 Node.js 运行的， 以前也叫nodeWebkit。这就给了你使用HTML和JavaScript来制作桌面应用的可能。在应用里你可以直接调用Node.js的各种api以及现有的第三方包。因为Chromium和 Node.js 的跨平台，那么你的应用也是可以跨平台的。—— <a href="https://segmentfault.com/a/1190000003870613" target="_blank" rel="noopener">SegmentFault</a></p></blockquote><h4 id="Electron"><a href="#Electron" class="headerlink" title="Electron"></a>Electron</h4><blockquote><p>Electron（最初名为Atom Shell）是GitHub开发的一个开源框架。它允许使用Node.js（作为后端）和Chromium（作为前端）完成桌面GUI应用程序的开发。Electron现已被多个开源Web应用程序用于前端与后端的开发，著名项目包括GitHub的Atom和微软的Visual Studio Code。—— <a href="https://zh.wikipedia.org/wiki/Electron_%28%E8%BD%AF%E4%BB%B6%E6%A1%86%E6%9E%B6%29" target="_blank" rel="noopener">维基百科</a></p></blockquote><p>所以 ，<strong>CEF</strong>、<strong>nw</strong>、<strong>Electron</strong> 都是基于 <code>Chromium</code> 的开源框架，可以实现所需的定制浏览器需求，准确的讲应该是用 <code>HTML5</code> 、 <code>CSS3</code> 、 <code>JavaScript</code> 来制作拥有漂亮界面的<strong>桌面应用</strong>。</p><p>就是一个本地客户端应用程序使用一个内置的浏览器内核渲染前端界面，另一方面还可以调用本地系统级API，实现本地应用程序的各种功能。</p><hr><h3 id="市场调研"><a href="#市场调研" class="headerlink" title="市场调研"></a>市场调研</h3><p>通过查阅大量资料得知，以各企业的线上产品及使用的技术供参考。</p><h4 id="CEF-案例"><a href="#CEF-案例" class="headerlink" title="CEF 案例"></a>CEF 案例</h4><p>据 <strong>CEF</strong> 官方介绍，以下（如图）桌面应用在使用 <code>CEF</code>。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/CEF.png?raw=true" alt="CEF" width="85%" title="who is using CEF" align="center"></p><p>国内桌面应用有：<a href="http://note.youdao.com" target="_blank" rel="noopener">有道云笔记</a> <i style="color:#aaa">（网易）</i>、<a href="https://www.dingtalk.com/?source=2202&amp;lwfrom=2017120202092064209309201" target="_blank" rel="noopener">钉钉</a><i style="color:#aaa">（阿里巴巴）</i>、<a href="https://im.qq.com/pcqq/" target="_blank" rel="noopener">QQ</a><i style="color:#aaa">（腾讯）</i> 等，查看安装后目录及文件，可以看出 <strong>有道云笔记</strong>、<strong>钉钉</strong> 是使用的是<code>CEF</code>，而 <strong>钉钉</strong> 界面是使用 <code>AngularJs</code>，据了解后端应该用了<code>C++</code>和<code>Python</code>。</p><p><strong>QQ</strong> 很早之前就通过内嵌 <strong>IE</strong> 来实现一些功能和界面。从2013年开始，<strong>QQ</strong> 引入了 <code>CEF</code>，对一些之前用 <strong>IE</strong> 的地方进行了替换。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520329975606.png?raw=true" alt="no-shadow" title="钉钉Mac版目录"></p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520330256871.png?raw=true" alt="no-shadow" title="钉钉Mac版应用界面"></p><h4 id="NW-案例"><a href="#NW-案例" class="headerlink" title="NW 案例"></a>NW 案例</h4><p>这个是 <strong><a href="https://nwjs.io" target="_blank" rel="noopener">NW</a></strong> 官方给出的使用 <code>nw.js</code> 的应用列表：<a href="https://github.com/nwjs/nw.js/wiki/List-of-apps-and-companies-using-nw.js" target="_blank" rel="noopener">https://github.com/nwjs/nw.js/wiki/List-of-apps-and-companies-using-nw.js</a></p><p>而国内的有，比如微信开发工具等，是基于 <code>nw.js</code> 开发的。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520571438918.png?raw=true" alt="no-shadow" title="微信开发工具Mac版目录"></p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520571517344.png?raw=true" alt="no-shadow" title="微信开发工具Mac版"></p><h4 id="Electron-案例"><a href="#Electron-案例" class="headerlink" title="Electron 案例"></a>Electron 案例</h4><p>这个是 <strong><a href="https://electronjs.org" target="_blank" rel="noopener">Electron</a></strong> 官方给出的是用 <code>electron</code> 的应用列表：<a href="https://electronjs.org/apps" target="_blank" rel="noopener">https://electronjs.org/apps</a></p><p>如图，<strong>Electron</strong> 已被像 <strong>微软</strong>、 <strong>Facebook</strong>、 <strong>Slack</strong> 和 <strong>Docker</strong> 这样的公司用于创建应用程序。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520668439676.png?raw=true" alt="electron" width="85%" title="electron 应用" align="center"></p><p>我所用的编辑器 <strong>Visual Studio Code</strong> 就是基于 <code>electron</code> 开发的</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520669844227.png?raw=true" alt="no-shadow" title="VS Code Mac版"></p><hr><h3 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h3><p>下面会分别用 <code>nw.js</code> 和 <code>electron</code> 做一个简单的 <strong>Dome</strong>。</p><p>由于 <strong>CEF</strong> 文档资料少且原生是 <code>C\C++</code> ，虽然官方给出了 <code>java</code> 版的 <strong>JCEF</strong> ，开发起来效率较低，故此不知演示。</p><p>这个是 <strong><a href="https://bitbucket.org/chromiumembedded/cef" target="_blank" rel="noopener">CEF</a></strong> 官网，在 <em>External Projects</em> 章节列出支持语言：</p><blockquote><ul><li>Net (CEF3) - <a href="https://github.com/cefsharp/CefSharp" target="_blank" rel="noopener">https://github.com/cefsharp/CefSharp</a></li><li>Net (CEF1) - <a href="https://bitbucket.org/fddima/cefglue" target="_blank" rel="noopener">https://bitbucket.org/fddima/cefglue</a></li><li>Net/Mono (CEF3) - <a href="https://bitbucket.org/xilium/xilium.cefglue" target="_blank" rel="noopener">https://bitbucket.org/xilium/xilium.cefglue</a></li><li>Net (CEF3) - <a href="https://bitbucket.org/chromiumfx/chromiumfx" target="_blank" rel="noopener">https://bitbucket.org/chromiumfx/chromiumfx</a></li><li>Delphi (CEF1) - <a href="http://code.google.com/p/delphichromiumembedded/" target="_blank" rel="noopener">http://code.google.com/p/delphichromiumembedded/</a></li><li>Delphi (CEF3) - <a href="https://github.com/hgourvest/dcef3" target="_blank" rel="noopener">https://github.com/hgourvest/dcef3</a></li><li>Delphi (CEF3) - <a href="https://github.com/salvadordf/CEF4Delphi" target="_blank" rel="noopener">https://github.com/salvadordf/CEF4Delphi</a></li><li>Go - <a href="https://github.com/CzarekTomczak/cef2go" target="_blank" rel="noopener">https://github.com/CzarekTomczak/cef2go</a></li><li>Java - <a href="https://bitbucket.org/chromiumembedded/java-cef" target="_blank" rel="noopener">https://bitbucket.org/chromiumembedded/java-cef</a></li><li>Java - <a href="http://code.google.com/p/javacef/" target="_blank" rel="noopener">http://code.google.com/p/javacef/</a></li><li>Python - <a href="http://code.google.com/p/cefpython/" target="_blank" rel="noopener">http://code.google.com/p/cefpython/</a></li></ul></blockquote><h4 id="NW-gt-Hello-world"><a href="#NW-gt-Hello-world" class="headerlink" title="NW =&gt; Hello, world!"></a>NW =&gt; Hello, world!</h4><p>从一个简单的例子来让我们看看如何编写一个 <strong>NW</strong> 应用。</p><ul><li><strong>第一步</strong> 创建 <code>package.json</code> 配置文件</li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"helloworld"</span>,</span><br><span class="line">    <span class="string">"main"</span>: <span class="string">"index.html"</span>,</span><br><span class="line">    <span class="string">"icon"</span>: <span class="string">"img/app.png"</span>,</span><br><span class="line">    <span class="string">"window"</span>: &#123;</span><br><span class="line">        <span class="string">"icon"</span>: <span class="string">"img/app.png"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main</code> 配置应用打开首页，<code>name</code> 配置应用的名称。</p><ul><li><strong>第二步</strong> 创建 <code>index.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Holle NW<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    html,</span></span><br><span class="line"><span class="undefined">    body &#123;</span></span><br><span class="line"><span class="undefined">        height: 100%;</span></span><br><span class="line"><span class="undefined">        margin: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    .box &#123;</span></span><br><span class="line"><span class="undefined">        height: 100%;</span></span><br><span class="line"><span class="undefined">        display: flex; /* css3 弹性盒子 */</span></span><br><span class="line"><span class="undefined">        justify-content: center;</span></span><br><span class="line"><span class="undefined">        align-items: center;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Holle NW!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这是一个简单的 <strong>HTML</strong> 文件，加入了一点CSS，目的是让 <strong>Holle NW!</strong> 水平垂直居中。</p><ul><li><strong>第三步</strong> 打包应用</li></ul><p>这里我只测试了 <strong>Mac</strong> 和 <strong>Windows</strong> 的打包，<strong>Linux</strong> 没有测试。</p><p><strong>Mac打包应用：</strong> 在项目根目录执行以下命令，把所有文件压缩成 <code>app.nw</code> 文件。</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip -r app.nw *</span><br></pre></td></tr></table></figure><p>然后把<code>app.nw</code> 文件放到 <code>nwjs.app/Contents/Resources/</code> 目录下即可，效果如图：</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520711078780.png?raw=true" alt="no-shadow" title="Mac下运行效果"></p><p><strong>Windows打包应用：</strong> 将应用的所有相关文件打成一个名为<code>package.nw</code> 的压缩包，将<code>package.nw</code> 与<strong>NW</strong>可执行文件放到相同目录即可，效果如图：</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520711343860.png?raw=true" alt="no-shadow" title="Windons下运行效果 "></p><hr><h4 id="Electron-gt-Hello-world"><a href="#Electron-gt-Hello-world" class="headerlink" title="Electron =&gt; Hello, world!"></a>Electron =&gt; Hello, world!</h4><p><strong>Electron</strong> 可以让你使用纯 <code>JavaScript</code> 调用丰富的原生(操作系统) <strong>APIs</strong> 来创造桌面应用。</p><p>只需3个文件就可以构建一个简单的应用</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your-app/</span><br><span class="line">  ├── package.json</span><br><span class="line">  ├── main.js</span><br><span class="line">  └── index.html</span><br></pre></td></tr></table></figure><ul><li><strong>第一步</strong> 创建配置文件</li></ul><p>首先需要安装 <strong>Node</strong> 环境，用 <code>npm</code> 来创建一个应用的配置文件 <code>package.json</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><p>在 <code>package.json</code> 里新增启动命令 <code>start</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"your-app"</span>,</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">    <span class="string">"main"</span>: <span class="string">"main.js"</span>,</span><br><span class="line">    <span class="string">"scripts"</span>: &#123;</span><br><span class="line">      <span class="string">"start"</span>: <span class="string">"electron ."</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li><strong>第二步</strong> 创建入口文件 <code>main.js</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;app, BrowserWindow&#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    win = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">        width: <span class="number">1008</span>,</span><br><span class="line">        height: <span class="number">759</span></span><br><span class="line">    &#125;)</span><br><span class="line">      </span><br><span class="line">    win.loadURL(url.format(&#123;</span><br><span class="line">        pathname: path.join(__dirname, <span class="string">'index.html'</span>),</span><br><span class="line">        protocol: <span class="string">'file:'</span>,</span><br><span class="line">        slashes: <span class="literal">true</span></span><br><span class="line">    &#125;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'ready'</span>, createWindow)</span><br></pre></td></tr></table></figure><p>代码已经很清晰直观，<code>createWindow</code> 创建一个桌面窗口，而大小由 <code>width</code>、<code>height</code> 控制，<code>win.loadURL</code> 用来加载页面。</p><ul><li><strong>第三步</strong> 创建展示文件 <code>index.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello Electron<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    html,</span></span><br><span class="line"><span class="undefined">    body &#123;</span></span><br><span class="line"><span class="undefined">        height: 100%;</span></span><br><span class="line"><span class="undefined">        margin: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    .box &#123;</span></span><br><span class="line"><span class="undefined">        height: 100%;</span></span><br><span class="line"><span class="undefined">        display: flex;</span></span><br><span class="line"><span class="undefined">        /* css3 弹性盒子 */</span></span><br><span class="line"><span class="undefined">        justify-content: center;</span></span><br><span class="line"><span class="undefined">        align-items: center;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Electron!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这是一个简单的 <strong>HTML</strong> 文件，加入了一点CSS，目的是让 <strong>Holle NW!</strong> 水平垂直居中。</p><ul><li><strong>第四步</strong> 打包应用</li></ul><p><strong>打包应用：</strong> 打包应用可以是用 <code>electron-packager</code> 工具进行打包，需要在 <code>package.json</code> 配置以下命令</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "start": "electron .",</span><br><span class="line">    "packager": "electron-packager ./ HelloElectron --all --out ./OutApp --version 0.0.1 --overwrite --ignore=node_modules --icon=./app/img/app.ico"</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>然后，运行在终端执行命令 <code>npm run packagerMac</code> 即可打包<code>linux</code>、<code>Mac</code>、<code>windows</code> 三大平台应用包，效果如图：</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520791859473.png?raw=true" alt="打包后的应用" width="60%" title="打包后的应用" align="center"></p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520790145115.png?raw=true" alt="no-shadow" title="Mac下运行效果"></p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520792416456.png?raw=true" alt="no-shadow" title="Windows下运行效果"></p><hr><h3 id="GitHub关注度和活跃度"><a href="#GitHub关注度和活跃度" class="headerlink" title="GitHub关注度和活跃度"></a>GitHub关注度和活跃度</h3><p>首先我们需要先了解一下 <strong>GitHub</strong> 的以下三个状态的意思，</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857435681.png?raw=true" alt="no-shadow"></p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857536175.png?raw=true" alt="no-shadow"> ：表示你以后会关注这个项目的所有动态，这个项目以后只要发生变动，如被别人提交了 <code>pull request</code>、被别人发起了<code>issue</code> 等等情况，你都会在自己的个人通知中心，收到一条通知消息，如果你设置了个人邮箱，那么你的邮箱也可能收到相应的邮件。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857569746.png?raw=true" alt="no-shadow">：表示你喜欢这个项目或者通俗点，可以把他理解成朋友圈的点赞，表示对这个项目的支持。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857709924.png?raw=true" alt="no-shadow">：当选择 <code>fork</code>，相当于你自己有了一份原项目的拷贝，当然这个拷贝只是针对当时的项目文件，如果后续原项目文件发生改变，你必须通过其他的方式去同步。<i style="color:#aaa">（一般用于修改<strong>bug</strong>和优化项目或者在此项目上开发新功能等）</i></p><h4 id="CEF-1"><a href="#CEF-1" class="headerlink" title="CEF"></a>CEF</h4><p><strong>CEF</strong> 在 <strong>GitHub</strong> 找不到项目，这个<a href="https://bitbucket.org/chromiumembedded/cef/overview" target="_blank" rel="noopener">官网</a> 提供的数据，如图<i style="color:#aaa">（由于在<strong>GitHub</strong> 没有项目，相关数据无法准确统计）</i>。</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520855809138.png?raw=true" alt="CEF关注度" title="CEF关注度"></p><h4 id="NW-1"><a href="#NW-1" class="headerlink" title="NW"></a>NW</h4><p><strong>NW关注度：</strong> <img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520856387728.png?raw=true" alt="Alt text"></p><p><strong>NW活跃度：</strong>如图</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520858064076.png?raw=true" alt="2011年~2018年提交量" title="2011年~2018年提交量"></p><h4 id="Electron-1"><a href="#Electron-1" class="headerlink" title="Electron"></a>Electron</h4><p><strong>Electron关注度：</strong> <img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520858325207.png?raw=true" alt="no-shadow"></p><p><strong>活跃度：</strong> 如图</p><p><img src="https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520858451333.png?raw=true" alt="electron2013年~2018年提交量" title="electron2013年~2018年提交量"></p><hr><p>通过以上的 <strong>市场调研</strong>、<strong>实战</strong>、<strong>GitHub关注度和活跃度</strong> 等 <strong>Electron</strong> 都占有优势，如下</p><ul><li>市场案例较多，各大型企业都在使用</li><li>开发实战代码更直观，容易理解和维护，各种文档健全、网络资料较多且质量较高，周边辅助工具齐全，开发效率可大大提高</li><li><strong>GitHub</strong> 关注度和活跃度持续攀升</li></ul><p>所有结合以上情况，之后会用以下技术栈做一个完善的案例</p><ul><li><strong>跨平台桌面应用框架：</strong><code>electron</code> <i style="color:#aaa">（Chromium + Node.js）</i></li><li><strong>UI库：</strong> <code>iView</code></li><li><strong>js框架：</strong> <code>Vue.js</code></li><li><strong>自动化构建工具：</strong> <code>webpack</code></li><li><strong>HTML5、CSS3、ES6</strong></li></ul></div><div><div><div class="text-center line pages-end"> <span>本文结束<i class="fa fa-meh-o fa-fw"></i>感谢您的阅读</span></div></div></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.staticfile.org/jquery/1.7.1/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sweetalert@1.0.0/dist/sweetalert.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/sweetalert@1.0.0/dist/sweetalert.css"><p><span>本文标题:</span><a href="/2018/03/28/nwjsElectronjs/">如何用 CSS + HTML + JS 创建桌面应用</a></p><p><span>文章作者:</span><a href="/" title="访问 李少颖（persilee） 的个人博客">李少颖（persilee）</a></p><p><span>发布时间:</span>2018年03月28日 - 01:03</p><p><span>最后更新:</span>2018年03月28日 - 18:03</p><p><span>原始链接:</span><a href="/2018/03/28/nwjsElectronjs/" title="如何用 CSS + HTML + JS 创建桌面应用">https://lishaoy.net/2018/03/28/nwjsElectronjs/</a><span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://lishaoy.net/2018/03/28/nwjsElectronjs/" aria-label=" 复制成功！"></i></span></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");clipboard.on("success",$(function(){$(".fa-clipboard").click(function(){swal({title:"",text:"复制成功",timer:500,showConfirmButton:!1})})}))</script></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/images/wechatpay.jpg" alt="李少颖（persilee） WeChat Pay"><p>WeChat Pay</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/images/alipay.jpg" alt="李少颖（persilee） Alipay"><p>Alipay</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/nwjs/" rel="tag"><i class="fa fa-tag fa-fw"></i> nwjs</a><a href="/tags/electron/" rel="tag"><i class="fa fa-tag fa-fw"></i> electron</a><a href="/tags/node/" rel="tag"><i class="fa fa-tag fa-fw"></i> node</a><a href="/tags/Chromium/" rel="tag"><i class="fa fa-tag fa-fw"></i> Chromium</a><a href="/tags/桌面应用/" rel="tag"><i class="fa fa-tag fa-fw"></i> 桌面应用</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/03/24/我的第一篇博客/" rel="next" title="用 Hexo + Next + GitHubPages 搭建漂亮的免费博客"><i class="fa fa-chevron-left"></i> 用 Hexo + Next + GitHubPages 搭建漂亮的免费博客</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2018/03/28/catBar20150927/" rel="prev" title="猫吧">猫吧<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNTE3Ni8xMTcxMQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/lsy.png" alt="李少颖（persilee）"><p class="site-author-name" itemprop="name">李少颖（persilee）</p><p class="site-description motion-element" itemprop="description">个人博客</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">17</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/persilee" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://twitter.com/persilee2" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span><span class="links-of-author-item"><a href="https://weibo.com/u/2757177517" target="_blank" title="Weibo"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/persilee" target="_blank" title="知乎"><i class="fa fa-fw fa-globe"></i> 知乎</a></span><span class="links-of-author-item"><a href="http://lishaoy.poco.cn" target="_blank" title="POCO"><i class="fa fa-fw fa-globe"></i> POCO</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#简介"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Chromium"><span class="nav-number">1.1.</span> <span class="nav-text">Chromium</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CEF"><span class="nav-number">1.2.</span> <span class="nav-text">CEF</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NW"><span class="nav-number">1.3.</span> <span class="nav-text">NW</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Electron"><span class="nav-number">1.4.</span> <span class="nav-text">Electron</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#市场调研"><span class="nav-number">2.</span> <span class="nav-text">市场调研</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CEF-案例"><span class="nav-number">2.1.</span> <span class="nav-text">CEF 案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NW-案例"><span class="nav-number">2.2.</span> <span class="nav-text">NW 案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Electron-案例"><span class="nav-number">2.3.</span> <span class="nav-text">Electron 案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实战"><span class="nav-number">3.</span> <span class="nav-text">实战</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NW-gt-Hello-world"><span class="nav-number">3.1.</span> <span class="nav-text">NW =&gt; Hello, world!</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Electron-gt-Hello-world"><span class="nav-number">3.2.</span> <span class="nav-text">Electron =&gt; Hello, world!</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GitHub关注度和活跃度"><span class="nav-number">4.</span> <span class="nav-text">GitHub关注度和活跃度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CEF-1"><span class="nav-number">4.1.</span> <span class="nav-text">CEF</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NW-1"><span class="nav-number">4.2.</span> <span class="nav-text">NW</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Electron-1"><span class="nav-number">4.3.</span> <span class="nav-text">Electron</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2018</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">李少颖（persilee）</span></div><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="powered-by"><i class="fa fa-users fa-fw"></i> <span id="busuanzi_container_site_uv">本站访客数:<span id="busuanzi_value_site_uv"></span></span> &nbsp;&nbsp;|&nbsp;&nbsp;<i class="fa fa-bar-chart-o fa-fw"></i> <span id="busuanzi_container_site_pv">本站总访问量:<span id="busuanzi_value_site_pv"></span> 次</span><div class="theme-info"><div class="powered-by"></div> <span class="post-count">Blog总字数: 4.4k字</span></div></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("aYLp6FBYzOGMYTUMR9qtvO3G-gzGzoHsz","LQGYiMkEyJ6VYOba5K0LvduD")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript" src="/js/src/love.js"></script></body></html>